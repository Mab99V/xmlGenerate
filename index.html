<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <title>Procesador de Datos XML - PEMEX</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="icon">üìã</span> Procesador de Datos XML - PEMEX</h1>
            <p>Herramienta para extraer y analizar datos de archivos XML de combustibles</p>
        </div>

        <!-- Secci√≥n de archivo -->
        <section id="file-section" class="card">
            <div class="card-header">
                <div class="step-badge">1</div>
                <h2 class="card-title">Cargar Archivo XML</h2>
            </div>
            <button id="select-file-btn" class="btn btn-primary">
                <span class="icon">üìÅ</span> Seleccionar Archivo
            </button>
            <div id="file-info" class="file-info">
                <span class="icon">‚ÑπÔ∏è</span>
                <span>No se ha seleccionado ning√∫n archivo</span>
            </div>
            <div id="status" class="alert alert-info">
                <span class="icon">‚è≥</span>
                <span>Listo para comenzar</span>
            </div>
        </section>

        <!-- Secci√≥n de marca -->
        <section id="brand-section" class="card" style="display: none;">
            <div class="card-header">
                <div class="step-badge">2</div>
                <h2 class="card-title">Seleccionar Marca(s)</h2>
            </div>
            <div id="brand-checkboxes" class="checkbox-container">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="select-all-brands">
                    <label class="form-check-label" for="select-all-brands">Seleccionar todas</label>
                </div>
                <!-- Las marcas se agregar√°n din√°micamente aqu√≠ -->
            </div>
            <button id="confirm-brands-btn" class="btn btn-primary" style="margin-top: 15px; display: none;">
                <span class="icon">‚úì</span> Confirmar selecci√≥n
            </button>
        </section>

        <!-- Secci√≥n de categor√≠a -->
        <section id="category-section" class="card" style="display: none;">
            <div class="card-header">
                <div class="step-badge">3</div>
                <h2 class="card-title">Seleccionar Categor√≠a</h2>
            </div>
            <select id="main-tag-select" class="form-control">
                <option value="">-- Cargando categor√≠as --</option>
                <!-- Las categor√≠as se cargar√°n din√°micamente -->
            </select>
            <div id="category-loading" class="loading-indicator" style="display: none;">
                <span class="icon">‚è≥</span> Cargando categor√≠as disponibles...
            </div>
        </section>

        <!-- Secci√≥n de datos -->
        <section id="data-section" class="card" style="display: none;">
            <div class="card-header">
                <div class="step-badge">4</div>
                <h2 class="card-title">Datos Disponibles</h2>
                <span id="current-category" class="current-category"></span>
            </div>
            <div id="data-container" class="data-container"></div>
            <button id="search-btn" class="btn btn-primary">
                <span class="icon">üîç</span> Buscar Datos
            </button>
        </section>

        <!-- Secci√≥n de resultados -->
        <section id="results-section" class="card" style="display: none;">
            <div class="card-header">
                <div class="step-badge">5</div>
                <h2 class="card-title">Resultados</h2>
            </div>
            <div class="results-controls">
                <button id="select-all-results" class="btn btn-secondary">
                    <span class="icon">‚úì</span> Seleccionar todos
                </button>
                <button id="clear-selection" class="btn btn-secondary">
                    <span class="icon">‚úó</span> Limpiar selecci√≥n
                </button>
                <span id="selected-count" class="selected-count">0 seleccionados</span>
            </div>
            <div class="table-container">
                <table id="results-table" class="results-table">
                    <thead>
                        <tr>
                            <th width="5%"><input type="checkbox" id="select-all-checkbox"></th>
                            <th width="20%">Marca</th>
                            <th width="20%">Categor√≠a</th>
                            <th width="25%">Dato</th>
                            <th width="25%">Valor</th>
                            <th width="5%">Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Contenido din√°mico -->
                    </tbody>
                </table>
            </div>
            <div class="results-footer">
                <button id="add-selected-btn" class="btn btn-primary">
                    <span class="icon">‚ûï</span> Agregar seleccionados
                </button>
            </div>
        </section>

        <!-- Secci√≥n de generaci√≥n -->
        <section id="generate-section" class="card" style="display: none;">
            <div class="card-header">
                <div class="step-badge">6</div>
                <h2 class="card-title">Generar Reporte PDF</h2>
            </div>
            <div id="selected-tags-container" class="selected-tags-container">
                <!-- Se mostrar√°n los tags seleccionados -->
            </div>
            <div class="table-container">
                <table id="selected-data-table" class="table">
                    <thead>
                        <tr>
                            <th>Marca</th>
                            <th>Categor√≠a</th>
                            <th>Dato</th>
                            <th>Valor</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Contenido din√°mico -->
                    </tbody>
                </table>
            </div>
            <div class="btn-group">
                <button id="generate-pdf-btn" class="btn btn-primary">
                    <span class="icon">üìä</span> Generar PDF
                </button>
            </div>
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
                <span id="progress-text" class="progress-text">0%</span>
            </div>
        </section>

        <!-- Secci√≥n de ayuda -->
        <section id="help-section" class="card">
            <div class="card-header">
                <div class="step-badge">?</div>
                <h2 class="card-title">Ayuda</h2>
            </div>
            <div class="help-content">
                <p>Seleccione un archivo XML v√°lido de PEMEX y siga los pasos para generar su reporte en PDF.</p>
                <p>Para problemas t√©cnicos, contacte al soporte.</p>
            </div>
        </section>
    </div>

    <script src="renderer.js" defer></script>
</body>
</html>